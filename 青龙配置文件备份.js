/**
 * @author Doraemon
 * @name 青龙配置文件备份
 * @origin 红灯区
 * @version v1.0.4
 * @description 青龙配置文件备份
 * @rule ^(青龙配置文件备份|青龙ck备份|青龙配置文件检测)$
 * @admin true
 * @public false
 * @priority 666666
 * @cron 0 0 8 * * * 
  说明：
    1、在红灯区同级目录创建一个文件夹，名字随意 如：自用插件 和 public

       青龙配置文件备份.js 放到自用插件中

       新建 青龙配置文件备份.txt 到public
       新建 青龙ck备份.txt 到 public

       新建 青龙配置文件初始化.txt 到public
       
        内容格式
          面板【0】
          export a="b"
          面板【0】
          面板【2】

          我是面板2数据啊啊啊啊

          面板【2】
          
    2、设置一些的变量

       青龙配置文件备份变量
        （必填）执行面板 对应红灯区奶酪棒位置从0开始，多个用,连接
            set Doraemon ql_config_backup_qlIndex xxx

       青龙ck备份变量
          设置是否开启ck备份（默认false）
              set Doraemon ql_config_backup_cookie_back_flag true

          设置ck备份的执行面板，对应红灯区奶酪棒位置从0开始，多个用,连接
              set Doraemon ql_config_backup_cookie_back_qlIndex xxx

  注意：
   1、无界超授可用
   2、自用插件
  ----------------------

  功能：
    1、每日定时备份青龙配置文件数据，防止配置文件丢失，如果数据量低于100字符，则通知无界管理员（已实现）
    2、新增命令：青龙ck备份，备份指定青龙的所有环境变量（已实现）
    3、命令：青龙配置文件检测 检测指定面板配置文件是否少于 4000个字符，少则，还原初始化配置（已实现）
  ----------------------

  更新日志：
      v1.0.0 插件上线
      2023.5.14 v1.0.1 日志写入位置更改
      2023.6.2  v1.0.2 配置从数据库读取，配置文件数据丢失时，通知无界管理员
      2023.6.27 v1.0.3 新增命令：青龙ck备份
      2023.8.4  v1.0.4 新增命令：青龙配置文件检测，变量与 青龙配置文件备份变量命令 一致
      TODO 导入ck到指定青龙面板
*/
const ql = require('./mod/ql');
const Doraemon_tool = require('./mod/Doraemon_tool');
const fs = require('fs');
const path = require('path');

//插件入口
module.exports = async s => {
    /** Code Encryption Block[419fd178b7a37c9eae7b7426c4a0420314bc7da91b63fdc5e2fcda2bd7a0f16345ff5f7a583068779b821453871e8c900a76f8dc7a5c35e848e3d1831a9e9d879be558c57d034a108af35375308657d399e26fe2a9e11de610f2f4bc70727ad7dcb42cd2d8ea8a6db3a83b6fd9ed85c7c857f6c3f8f065a4dd87f279b83db36a0cbe57f3a7454de5b7dbce5ac605c9afa619f3c52091599648fbc40b10a495ba6cc18d43e265aa7046a288aea4b24b8f3baf19fc7e9dab2f6a94d4ebcb600fe0f6cda5bd16d204fa580dbdd695a07d72de87cd8685822e481cce8c7b53fc13628b931ef46ae046c7aa714ca4f1a42c0d8a4c28dc82938ec8707f9f6d28037381d04dd356a5cb6d5d900ff375dd177e6353b845df8198f829f0f60518d370fdddaf96fbcce56c45a0df2895f2c12622099ba1c446f24759ac1a0c0d82aebaee27bdb4cf239d896de4d6f3230eaf5cde6e4d88279d523e37753a965049afc3adbbbac5934f8a2df9ca886050dfd691cbbdbf1f7f47326a4972247c81b0f4b47cf58b5ddf23abf7bb14bbeb13322c2509f4ad221c393a1eee4981534708327db2c89b8a34ed584abb569a418834ef9d6d3f617014c5cd71360ba3a5a6b8e45f46cd68c1246d05e8f3fa8c1c3d9fa882b97cd30ab571b6052ac1d3b8c00acfaf13869871f36f5a2c3b27a1c3b1c6786ad47f122306742ee9223cc8853cf34f1afcc8b5d516ddba668ee3b8f8301fd21f1ed9a77ce919dfd21392132dd7128d0cbd72c2064582d684dd4e6c33b9159cd6c4ae5e409478e5ee3e8e5adcf25d637b218f30b412540de25da05379c4ef6bf3607712299fb096617ad464f2daec8388afe710ce49e7dbe0c285c4a4dd0849219818ab2a92bfec26e6c2aa15941ba7e3188323da3ac76bc0fc28fbb9eaa6ca7e6b739497dc595bba71b0132d4b1bd8134d11f6e61c8f181d71d84031b443ba2a9d8f672f04ec27b2848e703d7ed00a319d69fe08f4d77230066c1edcf673579ee494eb81e493185b6626c3a4faa021ae9c74eec12f12a6ce9f10a603ff33b7d2cd2d7e0299794f71a8ac21d184c758bda28db4244169226efc5f89ea60fd701177775d88fbebd9f64f46dc168a9730700893445304683fcb969e831b0741e51afa81e1cc4c9dfd832158691bb99bab1e2b14da45a1d90092c0ae688bae2b85e3b391154b019938609fe81e64ab3df15070fcfdecbf117f6913e5220cd62f40007c4ecb925d2934edadb996ad93563374f26a17ba7696dce2417e692928e39d2f4e7ca5a40c5a2901aec4fc2dce78ed1f5dd6a0a17048ed07dd77bc2c8c059983e0650bf562c756a426713e5c3661006bf9ada6aa2899b8cf59395a392f9a69ef1ddbcb27d4461d3f6e3ad599f0167e0a3fba1b549c1bd3f86405bbb8203e83a78c50812bac14afd50b6ca7efab42bf42c243e4142f0b4bf7b36fc96b121956982d054ddeb46e82f90195244a991ab0052589fe1a369630721012b279e009adab91c7dfa73333ccca0441bf5f58ca1645afa2adf3e44ccee81422441c27ed9a21454dcb7cb89a576690edc5206b488e0095eaf9602339c1ba94911c3ef1878b5d7f9f09dd8118009d5d427fecf6bb3ec84731a9a7587b77584d891cde53dbf7bc236146c350b6ff28874a1f57f9ec155689fa55a19dd64f6a72d175408894dd57fb6b8bc9b459cb4a8941a8f201a535e1b757751b8c637a47fd30d7d6a8834b0c4ef4f2c1f447276b5122d46da5e5c3253476f8932d2da9848dc49bd4b6934534f660e08cc1aa53a92627252ba26e6f5e29786205c22d6e67b5fc9beba5b36a8816a276d778923d4037002f4f8d69d88c1df777095b8fd7a614e8a2c2f053ecc39b7d678aa8ed959c946990110bb05da1ebfed1ab00e02c880ce5eaa2db6e6eafc531b03419488d6f00db1af3e0cb02c18119fe2f53251d406dbef6454c64275bb4bc43978cea3e227937c8a5b9711bdcd23f79256a741553e23380fa4b30a831379568e063836d207bd88e70fe5fede6d557ae6962c6f9087fda2ec37075937bcc7b470140d1c68033b497d0073ad498d6e483d873a5811596db3b543072029aca526d0e1bd4d816718b3e63274357c3124eebde5ea7eed204e6153b06198275367675fa60d2befa7e85bbdf505f58f5ee7452505b41d4d730ab0816a2abfa39f95f6b5619f5083dc8a4854304ed02d8c97b53736c2790d4b1aed66b2ddfabd890565bb23ebe568243d3153bdbd2b0cdbb418bb90ec20df592d732c27b20c22dd352818355b214bf290fb237cb938b17f6a389a255d290b7564856ffa1c27f30cc78ea84ebb6f0c266ba9403693788667c7bd15f4d0528b34dd4a6b0a5a4caa7ef30093ee01d11714119e293a64848cec3878902aa13592a0c98c8254fad7dff96e854bad47d45167cc6a9016d6b77628ceb705644914f59132876e525165443dd9e42fbe3aae2a06f4e352d6c06a0d860a0513332e9a0382e6bd67155f5431508fff414f9fde8fe52c570a8d2eda730d1005fca0dcf034ad1279299169cf4fd40d1cb05e1cca5cf06d249b12d170a9961e5fa754e6caef1aaafd9cf4fa14b9aeff0f2d5af5204366b2265c67b12d14c73f79d3e3d749fd1ac2e2d751765a9e6adb9e918a0f58a456962bbcbce8672acf4d0ea02f98242d528e0b63a1c6ccf06dc4697c2318425c10c2d64cc37116b03c8f6c07d4cc9c6cd4bc2ee6aee90b0ba99063596e665cae06f7dbd2afda4e199e6033162bbd89f145acd9e8e2144ada9d3d5645d83166524a4aff435c0af3a54749df69f0d118147f27311f05551a181f3ae7cf7915f5db8acdd44974d87c48aafed3eea42758308d0431702a20a388c992e32a94e8f65bd25b1b35a9bda0b1d1bd31aefaa87e2116c67256ab72dad181623848e7af27742cb4d3a8e24a13734427ae91ce6eea40a0089cb539a4939b3a5f0c1211503c9d0da666a4970bd208c714f00244ecdef33dbb7f15e7ea77fffec3f1f777c51fece63955400835bd26679551a5a9a38aa640e86198af5c69079f59dcf88a1e8300860bdd2c1116955870e66ac429a6d8aab3257c963ba0f6b080f8543642b67fbf68e7e786b1a6e4df826ae2e511fd2d69b987219f35b0aca1d5064477b7711d6fc1edd2d56b6d1a1b9a892b8767df149a3d072de72214927c5ccfb380128f8d33b731613bc91a8890ec98f1b2e7d91076379702d31844c175459754e5782b3d51d78b96fe898f7b820682b2e8a3fc1c43af8cdd8963cb3a7320b8983e10733d5ea87e1a88c547eda4407777d17a5af7a9e27e68596fd4af72b6b1d43c8cdbfc2788eb5eaa9886e466a52224b8b0a8aefefa934e7ba4383a5d51b213f022f79945928fa2791ea32f1d0541327d3ea90c4f28ffffc7e011f19d86884fa1a82660ceff83b226054efb9f120b2e8b869876c8bcfca205847a4329a2ab912c68f3fe85642532b5a82483694e18ab3da4e6dbf2f3158f584341d076f8f49686deedf1713b8c8600f31a8d60c5e9fb7b6c64171f4d57110985498d88d7e6bd3d59fa0abb4526984f896a2413900bab8615169579e54f333e4538176668a3c36ded3a9c1d84800338cf6d34667f4aadc8324dccabed54cc60f39ccf52d844c8354f2ce26f948a255fbf33dc9050aec9d026a882cad40191241b923a7015af4f28d7a384e439d78ed95eacf1b95d5c0eab3187d34516e2c942d41c6b84589b49e20702aa0911a40145d3bc6ba3c2bb6551534c19599fc0a2c06d98485f0319249e6fea04792b519114a719640a89cef47493c767ffd41c4a85322d0f9252793e0058be1f7160a883f145ed10d4c8709ed6e3f375926e65f1421b1d4073797f6f83cfa2ff8aec9d2f97107493305228066a25e8abfa5733065f70c815b328dfca3ddad9f793de66b0f02e6e276eb68c74281aed4f71b4d3e0061d81063289dc40e72be592513d84ee15b331dac2cfac01a2cc97360087efb1f01f324ac5885faf0f4e7b6710f8cbfec58d357a4abf99d21398c1ac0125d972e1c42ea47405d1d588fd5150a812e6afe76cce891ed843210e3d154bd274b962ca18094f5a9f2419ffcdb994b44eda144af9c9181fc8f5fd58a26cbc41716015870b6cf2701ab8876eaa84fa734b233b5dd5158bf71fd053c5a10cf293e1280e98183c2f2eb126cef730c79d6a1cc8ed7389ee499b6b08970a155606f77b3774f8158d731d310ed53b5da8cfa06e65918c126fec44973bb2005d4fc7bbc3f554ee242e20341d32999e5b74612747ca295cf55f135b117fba15a1eb3c23d19309cece54e2166b614a867e64b320f1033a96dd17482875940b9605a0057020295fd48aea8bb805ffa0b8ba6661e539a5ed90e0c22c717fba3770a0270e93149bc6622e55cbb9bc73f7baee2bba775d4a3ab68107a7fa688b089114012bfa635a64570bfbbf3eb174e151d1d36e22333ee947d1b5cbecc01d8dad8e539e1f119c9edf6b12baf6c4666b268842eb86f76fee06c63b7e3c3a0e956879814b73ce71ad9ff19d299aba1d9e29538479decb9876e2c76432b14fbac566bfdd2edb046db3ed1561e3a7ba049bca155af7892a5fe6793a0f7b6931fe2aa461a435e650ef4354d3980f1fc49e2382ee2e182f7034b8f5c2ae46de9cd120d3c981bb2549a1d0d9f4ff1260416e08eb3d8f6bbe9f922eefa1497b204d5e89985da45dac3f8e5ce31309fb62fdf8c2ad90bb328928d5c6e8303206bd63db3dbb0b192794fd454584c1980d770be06d2165d7a736922cd48ee29a4ed3289d13e9ea7f91a58a208d6b86c2ae698c5ae07b67f6d1e66314ab461e40f1ce3fa90d38324f073b955c410895ffde6be40bc438dbd43cead5c8c227197a97881119eb932bd29bd0eb817796d4265d08bac0c73ed82a28fb8a30252801067eccdee8e07f9a819b17946a6975fdbbd577b0432fc7592e1a6e6da0a80fdce60a83eea99a597c63a54b107a475e253cf5cacf8a931a023e2ae4e3267bb9c3a6898018baa1dbf306cbd18700612d10c628c61e74b1957e5811d0cfc30f8af614cbd63e82f9435fe8bbc7ddc07ed6f0ff1bf64ab4ffb01b4a7f3d3c4a08e301ee9bae79e144773b21514449ab66cd38729e55855de2817b377eb0df61ceb882aef5494054be3d7aa2fc50354cdbe6778b528d212b52268dae6f178b9c8e95ff112992159b771a5fefa4160048ba9d22e71e76eba3476aaa00026412a6a6322720f6ae1e34b69234d1ed1e27afce38315a7d11d0a4dbc83f4495c3edcef134f5bcef195322c853259d36ba52609b5d1ccdc8ae1eb9e373fee2d19436c02b5a1ef5318104421d28c4908465a91a36022b2f0d82892f27ee2d3e6081920bd331232e58c602a36b03bc3fdc84d2bf2b89e9e56a8405fe2e5cf850572e1609d96f235db27922c6162e8abae22f70c97a0335816c70401c020350b425f9728e0e700fc1455da367cf62bbe2a0841d2874d0e753dce30935337a08e18df63e7fa8621d8d41110112974e9d6dd2a3d73ca3c024a5df10f10fec7ae41d72949d4b174f599503ddb920179a7f83d2e4a65246e9adaf36c4248ed644511254489701f34e47d0582286010002f9aa402a8c8bf8ade970bdd0b60c872aad279dfc1ec619efcb0f183c0813f3405830a30e93b28fcc214268f673b7a5cdd7de5d4c57ccb0b06458d96d99e21e30763a568225df226ce7d42ade3955ef5b10699f6051d53cf72f5cd669f95ef0cfe935a1d69f4c34c863cfaaba18dadbdc1a9f8fb021ae4008dbdd2758cd17e3ed7aad9cf56a68d35b1a7d8db6159c1831549a404acc4007175ef2ce1cef7c6791de30ea2f42de1c216922521c37d371c4a9a714fc5791ae1f0f0052563dea27bb21102cf65f11d659fa144fb05af86fe3a6656c9bc5bbbcfcdf0679d4e0caf4009f72f2df000bae89e7f899e841290a4f315ec097a90f31f74c0e67394b823469f32a1afa774b4cf9050dd974808aab6445d0ab62c9a432fbbefeabab475935e0c237480deaf1459dbd34b960b60bfd65517c98b2d7a297473e1b947baef362057e7f061b740112e522368f6f6db6a7d7cb28734478641aad86c3db01a76940d92777c62893eac57f5da34b28359fa3cdbcbd965fc4631fd576ce9bb39058ac3a58e95c6345d4d5f48dfd5d572f973b01cc9bbf8b649469af51ad9ca4d3934dcbec9fdc109e271e659e51877952f84f98898eb875a3ae9bf7020615d5289ab30d34e3ce71679ac036ca9f0f258d9badbe3109407e49fd9dbd2e8ddc309a589136b7a86828945ea0218e39bf79c676582b74e1c2316dceffb955ad8a70c1786776d9f7b0317a024832711911142fc17d8de24130034ef162a6d5a265a6171e23de97d863b31f90703f82b58ef652fb43fe0fe9a03672d679ede7dcd7729ef12865d2f1c3836c74fa8f000257aaf5ae01e0ace8668cef5bf2c93c3633548b0012c7d25e9d2dc3e5ac739912cb6c7ac89f153396a91bde7ce5ef852f07ac7b2cd8dc19c952ee289b25a2d9ea865e5433d52e9caa2e000fbae3397154538e548649e9bc2f23ce166642417419c39b9bd4ab583cf4dab080d8433cc17aa571b0bf3f98a898a5bacecdab684faec9f4044ea96fe193f23144e6e588d80cf0dc09e374e7dd0cbd2c8904169ac9a64d013db86cfcbe47885517df67c33f8d8af7a43244f4665f8f90e78fe51086d0602e64375cc32616587f4c9795bae0e211a38dcf43d66024fe919343c0fbe5a1827a2932cd2357cf8554b1f91de574298b999c339e19065c14cbeb055254459574b6a07f2e80551ca590ae0778c4d36a868ea5fce01a05318da8931f848ebf41cbfd2a7ad60f00fa8dea25dd2ac062ee92171200cef4ef2b0cfe0428e3a49c29cc5c78fa01ab18a2141c7ec421ba2300cbff401af2c3a40d8d97faf39a64778fe5abac658227937ea2566ef14636a2e486d77f2b5a234d265e1ca47ace92f1b1dce2d10dd0a76c4b313ba525d713bdc1cddbfbbffbe62288ecaae9a2c3a92da690bcd50aecc124338cd6408f0561762bd13ff9423298079cafbe2aeb6cb20f11e31db6ce79056738422b4db926590f2935a52d185d897efa268f8073c287f41f4518137c2e93cee210cb690d3f72e2014859161cdbb17d85413b93ecbb4dcdb572adbe874a700c03857456a746677341ac32a48d8c16ba56254e2e0c58c8af0514f5e9a13fac46cb296a309d47e6dee129d0331b91e89f0c5637fbb8468233879ad3a6f838eaf78e3349d4841dd3e236b9e1f94eb1c1336e22552f51a500e3cf6cf53ae93d844b0e64282089d5c308d38489989372adfcea374aec75b790ec5c0698ba7f909f2bdf44e8e4d56f1bfd72b08ecb82689a25c7a0c51cfc9ba883b2f0dea633ed4d2fc5ae8058bc42a71391413859afce1b25a7763f5dffc8978724fc0ec612a078248279a8000388225fe0861eade99a8f3f9efb8e2aca6b8143f6398fef2d156b88c89458709d813724b594d0bf28ab99d0fb0bfe8457394d2c1b1c204b359b76897ccf57f5ed123a8075f6ea21285ad8d352b818f195d99d453360826d01f16ae5284954f55c34da4258fae397170522c4cf9f5bcbdf2a12d8789b04267168920e207effadeb0ad662bb84278bae9b3b487fe87ddbb407a65184add71f8f56ec3b6ebb892caf72ed66a2b6accbc2c22f8d2e0406ce9e943c571cd03dad2a2212448e8e39beb13ca866ff96fddff2a346bc1ceb9ca3cb8821dadf9093da550a7808d03c2cd3281146d3534f895264ba9fffd37b1281fb7737ec2b9df0936ac31fbcbc9f35398d1dd658119b1ca5b8b799a30b346097e3a3aa209e60495455e37fcb3e8d7439d0394fb1fe81d3244d628aaaa7322344b9e1d57c4208dd4ba6dfb3a893466bb8396bfeebf132c5679ba60ffe6c5b2df628263d6d64cdbb1af7376e181e0b5a9a395bbb9d59e66bf9d419d780a8e9f2cbe073966d0643613277b3077d460f16055e5c127e6b9a9fcbf751489a4dd31dd454fe06260131ec467d41c3d4ee8cd562ad3db3f99f8a12d11bd99c5e59628071f9b15f9d5fe0feb93dc42145c84ba7512ed1ee757a33ff051687b3de73d9f57125190d87561326c7544b7daf012310781a357370557e419fe19e8bd61858e76dabd7f48329c269bab1feaae08403e048a95aed98f385560884baeb959277a6c8a46e7925a459214ee06d16d5f8570a513b2aad901c27005ae60dae9bbe86a40a4297d9b148e998483e9dfc7c5feee9e203adc06cfa1e0e98eefd38e4f6c3baf0bed00fb5336c393c3d718ea5a790f551971fe9b8dcae7dce1dff32d460ade75dfc37abc58405e4dc7ac9b97a8e2e209e086cdb7feb22e20aea5361e13ed345aeedc3e0b1f51f31459702cdb4760a0a9f33f1f7b10e22a57dd9f52907d2a785545c7c7bd280889b5f61e6639ff05690b48d84695c4d61bbeb5355dba8dfc71b0d10d76f378224c156be3415a4a30ffd1448a68ecf44d12de35fb87168f82d7ea3d9a6dc146ea67ae01a5b4d07bfc2e6a1ec52b68347695485e113e341d070dec85a34294a5575e518773a068d7e957153eb3e8a479a60854f2d909d7e488d82b891e59752256cb1a52a26a14353a583d54ebce6959bf0de796815dbee549e1dca2d8b8940ddae2145b2c7288915fa0031f4355aa73c25b9d7980f27149a9247ce8d0ca0a98f3787ce0677b86a54a8359ed5b5fb78ca40a440cabf18c1d823244c36bb30c511c5e977524988a9aad7ff785d088de38f8ebeebebe50967204c013715e418b53fb91b05f88858750db73c68389f566d194320ab2c39a291412040cf66ae20e25667dfd2e18854568a5b62aaa7e46167fbd2f49b656408bca952bf6bc3b208cbcddc0b52a88051aa1f538124db5fb12b302eff92c327a94d5ec015e507418daa2d23c02f47c45ec205bdf86b346e977ca30431b6eafa9498ddbc3388f5ba9fe9aa0987895362a3889742f3b18185faa3aef9895c737aef88cc1b6b7f273be7f8830e70f5ece509112a8acb3347609fd2f019bad40b6a63be5bf98a443ed79217b7823a9a9d56d024d15535ae9a97da1cdaace1d905912cccc85d40697a9daa37993d1b1faa460edc157f1c4bd8863cbd5b1410f953c9b5b37327ef86d305347d20796e31b484b496e013fa1acc28c4c3b5835b64302974876c5bdf2cdb038cec668ca8a638b] */
};
 

