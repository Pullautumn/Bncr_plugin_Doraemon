/**
 * @author Doraemon
 * @name Bncr_spy定时任务功能插件
 * @origin 红灯区
 * @version 1.0.3
 * @description Bncr_spy定时任务相关功能插件
 * @rule ^(定时) (\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}) (https:\/\/[A-Za-z0-9\-\._~:\/\?#\[\]@!$&'\*\+,%;\=]*)
 * @rule ^(定时) (\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}) (export[ ]{1}[^ ]+[ ]*=[ ]*"{1}([^ "]+)"{1})
 * @rule ^(定时) ([0-9]+ [0-9]+ [0-9]+ [0-9]+ [0-9]+ \*{1}) (https:\/\/[A-Za-z0-9\-\._~:\/\?#\[\]@!$&'\*\+,%;\=]*)
 * @rule ^(定时) ([0-9]+ [0-9]+ [0-9]+ [0-9]+ [0-9]+ \*{1}) (export[ ]{1}[^ ]+[ ]*=[ ]*"{1}([^ "]+)"{1})
 * @rule ^(清空过期定时任务)$
 * @admin true
 * @public false
 * @priority 1000
 * @disable false
  说明：
    1、在红灯区同级目录创建一个文件夹，名字随意 如：自用插件
        添加定时任务.js 放到自用插件下
    2、触发示例
          定时 2023-05-09 11:42:00 export a="b"
        或
          定时 2023-05-09 11:42:00 https://www.baidu.com
        或
          定时 57 41 11 9 5 * https://www.baidu.com

  ----------------------

  注意：
   1、简单测试可用
   2、无界超授可用
   3、自用插件
  ----------------------

  功能：
   1、通过把 2023-05-09 11:42:00 格式的时间转换为cron，再通过bncr_spy添加定时任务（已实现）
   2、时间支持cron 格式 57 41 11 9 5 * （已实现）
   3、支持判断链接或export 变量判断定时任务是否存在（已实现）
   4、如果传入的时间小于等于现在，则不进行处理 （已实现）
   5、支持清空过期定时任务，如果清空过期的定时任务成功，则会执行重启命令（已实现）
  ----------------------

  更新日志：
      v1.0.0 插件上线
      2023.5.9 v1.0.1 新增 时间支持cron 格式 57 41 11 9 5 *
                      更新 功能注释
      2023.5.9 v1.0.2 新增 支持判断cron是否过期，如果过期则不添加定时任务
      2023.5.9 v1.0.3 新增 支持清空过期定时任务
*/

const Doraemon_tool = require('./mod/Doraemon_tool');

//插件入口
module.exports = async s => {
  /** Code Encryption Block[419fd178b7a37c9eae7b7426c4a04203239aca94c6c66c31402c284dcdb6d205bdcbe7a526eebe0b2e9c3fdbcce47d1e4a425519352c1e60c15510bd32856a6fdeeaa9674b63de1b4ab9c90489f83df0d27c333351b6b030def0c46bd425a705b205f4f914f134ac00750f29fe2a23cb4978a082ce06497148e8688a87d4ab9d1b464ad3c64a078d30a524c403347191f4dcf455bdd69721382949b64af639fbd96800dac35de1869639c3a8d719dec664d47e5b3341da4f1cb46ebb57e9a650e4143d948463de5d7b0ccceaffbf0649ea3334e04d3d57d23bbb01417a7ab9e73a81d22d01421970a3b7fd04ad27d425013f8dbde5459fb8415a663bc5cf4c75a85b9b5ab5737cb99b63c426a9d4983620f08aa9f6e63a084a17ee3c876cae2962cd817d692b84dd6e99c6cacbc8c56fe08c25a1f99d51e1b839095ca4968cac58f3e1c7b39dcd330d8ff428b13a48d5a5be73b4415ac67e9d08ae05456e0dca1a322fd76216d8364b46a840566ee666f99923112cf70f19de8e7473430f14735fe3abcb1a7f02556ef36ba314dc3ebab996668c2ed4f82df64d6a03ec9068e357cf9b99654887282d849e1f45827f3cc8a7111bee3867cb1bc33b42429f074929fb2e154ab7c2336982480c3ce440b164d6a9c6756ee299bee155167591573fb8e890674c51715a5a73ba407bc32280b733641396a8392a8e1de446ceff32fe72f722fd1201df1b45bb0dcd7cf900bcef982d444676fc96a91a9998dc873c424f9bcbc607b8ee6e6fa60d1f5c6efef2dd318a42688886f7e31e687f62cadd3da6872ef82585d3c87e62bac6b629495392751e0d82e2deeab85d36fbaaeb1dd5e658a42a2af0dbf08aa04f6d3034952a4584c61d57b4ae18caa991c70607d9c87490a87ea4efca03c34016d3b189f3cf36c577e980d18dde0df6b260555aea6e5247d369ab4f5d8ac9be196115b444c3df531d1238386a4f29107f02fffddf6dc499534c1a3538e7bee0da529a469cc133193e6b16687c855a2a234cc85744c2704cd857fcd3d40e05abe9b8e3280950907b4628c712705f3e19157ed9d0872c7d373ec355da10e2cf9a63baa76f82cce70679ed93bcb3b9ac50a80f6407aacaf60e47ac5b84634db29da022b2634b901328be7d5f6a9e61bb220956ea0ef0d9590985540c4fe1bf54da69edabd8ae9d4078ac729179c6c487b6e46b7d5e01a01a21f69a3afc0605d9dbcea6059659db9b7e9e625120a7c58a714250a5fa4ad5516f80cc4e6d9663f81945b98d10bf46f326bd8d6eb8ef2470d221856d4d60635e55bf9b3eb223ba96192c3bfdcd182487cfbdf77620d95ca8844bfc00ac88cea813b0f7e65eabcc170e43f97c28109df631e69615e9f216da4bba8df786fffa2142afb16229113f576bee60c23ebe8db7a0993fd76d6bc97e1065bff71f540bbdb6c1ae3ee3296dbcd6c0e0b249e204c1b4573a49cf9ae0740fb7c4ea6d68d842fa656fcea42f626aec89b67eb2cd4db4bddfacde734a08038f5be89a3bf79fff7e5462ccf6cf3155efcd8c05c29c97b8af889c1f09570bc2e85c109ce5f223a866bd3505b45344fe38342f093cb5c5bd16138961f99e94df8c48cc56c4bc907284f7759089987d418c8b749b1a9395012e901fe685b611ed792200626678d546f7a1e85d4e8204a95ddbaba1c27bc50a2abf1e59bf2c5df7cdaa3555c374a1c79a12ee5ad86376b205f0c70ee62c4efd69f15b3bf160d475f333f7999747052ced5993c419fd6280eabb821d503d59ab37a5995b5b80e444d88204f0b5cda5dd36a06e8fe2714ce7c6ccc62edee7f5be600f5588271dbe4e5cc3c712e7875291f86d30a47b4e81476a43b2ff5c8eb1baee0b2b28d248d8e45ac60b4da71a0cef3287337ca0cab6650e6bb38337a515f91eedddb57ab0389f5bbae0cf74d97bf311e27991a261cab3f8ad52f8012c88c68517a33cf0275313f6522f5b6ef5f1e46f6310f83eb1263f47a98e240d8361ebce87d9786d11d719f4367bc6ef8caae899d609bf897668ed19fb8730eb0aaa12a9d90576873dce6ab6976b97f494b72cf2b12e0d511d2afce1b21327d7f5f2936d459c8c7dc7d01a4fd3cb7b7b53b0a9b75a5d4fd63e81c103aee6a2f6b05522372afc32a61c7b3b302f88889e787037b25dedbab4c6ac023ebf12645623db32fc4803176ed9f2921856ec6ff6a7950938b4883b3f596fac2d42563f6810421078b93697851c0a840a3578b8bb974563276359e1d8fa333c57bc785a3f9076945118e314c4c195d302500bcd99af188598edbe6e96a9cf872e88cf75f2f1b85e7a19aefde71f00e9d98cecd2046958419fc3c936fb304d29a214f986eeefae6df5e6c9703f43e4aeec3ac6ddefae51837665eceb8dd903baa015b6d2e6635ba63570e445bedef8a1e82654d3ac322945f0dd2b2822bc0cfd340e1c73ba1fd168da40e561e06ac727096cce079e3010dde8be8e5bb5a00c7f45e44d7fcbd6c5b39142e37e94d139b663a5352fa809df1bb6b8af03334c5659fe09eebc957f759788708ff3803d5c49a8d67d196644419f4f793aac2a7108c189fa67a2c56ad57ca65ac2f512490f7666d9e8c8828331de3ba7774d753e29f3276ae8fdc0d22688aa90b198fe52804944da5343f7709daae4ece80210d3f60d171fce9d021f5215e5721632086a365fe614593d8c604d89c77518e646de98ac9c1a5db099257f20c8421091f5c5593cadcdf2d3dfccc502bf35d9e2a4ba95834cebaf1ccfe7e78233037737349bb24da8a751cb44b72849cd7a1e0c17c31ec07529013777c715f9d8be2ae04c7332509108b4a3f2f999a5f2ab925b514c6b39e30a76ee266f4c5c08a63cac72078cfa8e58c4875e216f3df1427dae5f3bffb0baaeaea824ea4b46caeaadf81e134ad0092804fed05e149918f4be913503474d32ee35cc222c884cfd9d63f8c8dbb0439c80f7a47226d91e2693106065ec5f0c20a3c35e045608309067fb41c355f08b2581bb4630d350e5ad12faf6289762734b946b0a3809ad31147e9e0e674c3e02c2733c2fcfc22a07c94d0ec8bb0ea48c8f038bc63665666600d4b6986bd142d5eb3bb7261a1433957633beb967a667417864ef8894b1cb540b2b2d41b5cab667fe163ad42049dc9f6df2e2515a557cb2203d266fd9faf5e220659442376202875abd094dd759b134ded17b1aef293dc38cfbb4e738b4e641bb977c44a1deb1dbc06ffefb2ea1ea1e7e6c7a847afd57e9ed4f2ed41ec3fabf4dbe79684cd87cd290a06d0477a22c9ab9f81b9b58de1022e253278a44635c] */
};
