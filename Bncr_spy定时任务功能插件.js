/**
 * @author Doraemon
 * @name Bncr_spy定时任务功能插件
 * @origin 红灯区
 * @version 1.0.6
 * @description Bncr_spy定时任务相关功能插件
 * @rule ^(定时) (\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}) (https:\/\/[A-Za-z0-9\-\._~:\/\?#\[\]@!$&'\*\+,%;\=]*)
 * @rule ^(定时) (\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}) (export[ ]{1}[^ ]+[ ]*=[ ]*"{1}([^ "]+)"{1})
 * @rule ^(定时) ([0-9]+ [0-9]+ [0-9]+ [0-9]+ [0-9]+ \*{1}) (https:\/\/[A-Za-z0-9\-\._~:\/\?#\[\]@!$&'\*\+,%;\=]*)
 * @rule ^(定时) ([0-9]+ [0-9]+ [0-9]+ [0-9]+ [0-9]+ \*{1}) (export[ ]{1}[^ ]+[ ]*=[ ]*"{1}([^ "]+)"{1})
 * @rule ^(清空过期定时任务|扫描重复定时任务)$
 * @admin true
 * @public false
 * @priority 1000
 * @disable false
  说明：
    1、在红灯区同级目录创建一个文件夹，名字随意 如：自用插件 和 public
        添加定时任务.js 放到自用插件下
        创建 Bncr_spy定时任务备份.txt 到 public中

    2、触发示例
          定时 2023-05-09 11:42:00 export a="b"
        或
          定时 2023-05-09 11:42:00 https://www.baidu.com
        或
          定时 57 41 11 9 5 * https://www.baidu.com

  ----------------------

  注意：
   1、简单测试可用
   2、无界超授可用
   3、自用插件
  ----------------------

  功能：
   1、通过把 2023-05-09 11:42:00 格式的时间转换为cron，再通过bncr_spy添加定时任务（已实现）
   2、时间支持cron 格式 57 41 11 9 5 * （已实现）
   3、支持判断链接或export 变量判断定时任务是否存在（已实现）
   4、如果传入的时间小于等于现在，则不进行处理 （已实现）
   5、支持清空过期定时任务，如果清空过期的定时任务成功，则会执行重启命令（已实现）
  ----------------------

  更新日志：
      v1.0.0 插件上线
      2023.5.9 v1.0.1 新增 时间支持cron 格式 57 41 11 9 5 *
                      更新 功能注释
      2023.5.9 v1.0.2 新增 支持判断cron是否过期，如果过期则不添加定时任务
      2023.5.9 v1.0.3 新增 支持清空过期定时任务
      2023.5.14 v1.0.4 优化 日志写入位置更改
      2023.5.16 v1.0.5
      2023.5.17 v1.0.6 支持 扫描重复定时任务 相同变量相同时间的定时任务（export形式的），会随机将相同的定时延后一分钟，如果有多个重复的，请多执行几次。

*/

const Doraemon_tool = require('./mod/Doraemon_tool');

//插件入口
module.exports = async s => {
  /** Code Encryption Block[419fd178b7a37c9eae7b7426c4a04203239aca94c6c66c31402c284dcdb6d205dcb49c1baf67fb90a37a43c03adcae0696b87660b27f45fe8026add8bc54224ce00fdd7392e7cb1fcf8865539b3188f37259a9a304108d32dd76d797a6688e5854d178ed0baf37b79b0bbb0896ba5c5605738a3c7d5dcff28fa77605131f00cdd3ca1d7ad52dc72049a98c631d8238e0424102ac231f486b22abd49a5cfc2489bfa5d208ea247ebf02d8b7bbdc4128df40cceeb799178a919920209a374d5b68ce06be6b85a48300fa1da6898562bf7505671d163893a298267f462c97b408461caec6ae5b65aa1f449904580d41f7bffe3c467c51febdbfa5ffa12fe62e74391a5af1fa7b96fe41ddc34f6114a3dd9fc94e53e4ecb52c6c52b1199def006594d7ea1999c7071691591d97d65baf776457609f7e98b72a7117924bcbfff29a0a30b5a42d4ab89d7ca654d69133a297e87ad8c09dea6331e33142612042cb20cc80c54b5586c622bf2bdb0d5b79b3db5c99498ba2543e8753c1b598fbee0e0cfc6267c4b40ef9d35a30508670059676bf5263bb334936f6a7e6c272d7bd3a253e8aff7c5532b36f5ff2a29f8df145dd0cbe0ca24a67db1cf329077b13659a82d3a92e606824dbb3aa5a2a225ca6d41063b6aa45082b646ac6be6b0ebd547a52ea5387310d90101bab962da9b4ac3c9fe849dfd5489b351e3a4d103591f52bcc5a6f1be26110151bc429c4bd924ea2d26d1e384b02d24dfa08e1098bb4732fcc266b48f2c6e6946f2d3414e466f6e42c6807c697b77c8ef6f5999afe9fa15f492634b8292e22a8fafe956a9d1f8fb1c41f70755d923f459f2ea44cd29407de324266f29abb8f532b8e04157a5af756489fed0ef06e39f096ede7009eea3a882dd06abff3d6cecb64818473feb1209825a4f6272d0b11edc63b0310596f3d1b24fcd00f44da47b2fc844d4427c39382b042d810117689ac36e61fc61a99837b8cc409a8c09f2c1517b20d133844bb9940ce88f9c1317e5235061c0cfb1f103be9b8802fd45f0eebfc6f84835ac2f9309d3e1bbad565c7a4c3089c920f03ac43cc01fc8c4c5ff92105852a48be46a13866d354431f64246282661ab54e2d5225a056957b872951b153532fe7cc507811e808ea6392a859fcd48cdcd6bd8c8759f9571e5cb0f2fab62ee521092e9658532a9a44adb7e2d38e33614c41b62d6f28ee92a3b2006bf65739a0e497c94b9e87abc8ad646d5c4b07c214361ef691011956811a925674207a74350ac345410d3a1ebab4414d99d2069755e0e054aa04f06c8f54f38def6172c59a88e246fc3c08b7fc2baa808d45364d598f58e90f49d1d4299b4843fac378258f5bb1f5221f62c6b077301ae5f7f21c6da86b9ff895407fd8d758bdb212738b8da4bcf676c75a0fd3325a20f21fc667206528cbe6de3c7a62baa03b6b441e36b6b8bc5fba7b5e19bf3c185ea9bb1edbf3815a672ffab8e8bc4124addd22e9f32740d9e5e993a41fac4427fa5c2862adc5a0e642558e9d463992e2d8bea10fb18621c70211b4647b231d9dc3432ddd674aa998809065e72f86b3266a6961bd2c7d5730e3f6ef6c1b7d2426c68e02abcaffcebb47e1795ce94708182fa4c9e8378ba1028a56811bfd5c858d90702fd4ac2780de6120abfe163acdc7555d23719e8771b656dec203c6dd06de951ce421f767ee552b4da2ba85408afda2d0db2914a3b9529e13ee98e038d62f779e24b83f5023aad2e3aa3ac98f48c375d57085bb35adba4bdba8d6ed3ba2cc054de87143d53eb6ebb7d24aa3445ce1712b1a37af23a303dbb3277ad49a24674f2d40b0bf796a4e844420926b3d5ad6e083f2c46dfcd08090ad01f6c57281d56aa1ba9f84c1f64188ad87d2f8b5772343e79ad6238f5ed6db19d9fe8fbd236427cb5acb46dc4f23675cb33abfbed6bdf4c38f54640b63448c481aceffa49e53f6b67fd28444433a36707898906b6fc3f6f2d869d79c3aaaf3c8e94d9703043d37f2dc4b4fb54f7103b64dbcf00ea4ef08fb58ad0260b176836cb2802fe98e80db3115c8904bfd46574652e9fb7cc1711af505870b455cc08512ee7f2f7d916a1a5baef3812009f9dfedf92c9862da5a6af852f66d075caa67d17b78869ed644d67de954138f99d2bc55e8aab6ce1c19e197ab43c5fa19ff1c87bba667894bc5e166f644e505b3075d366c868a5ecc35c6aca23c288127f7596501db52d5100be4ae24cd76bd36d28d445f5aaaca7485b49515aab9ce579e8700ae59f00039cdb25db7e716a3443feae78f5ef97346a88dbdd2061b999eff62866fbeed799274b4ba7858caa5d7db8203545fe38700e0e3c37508214e4355b31983414337e054e67f1fc3d5e822a7ed4418343e4128962408a0dfb1cd40e39af681fe23896465656065c7c7de7aa8a8b03e0a98e5a5d5db8ed9da63e90446a426af79e37677b94279a4ff457c5e91f641cc1c197f64099ecc9ee1c78e00556542369c7f6840a117253fa5dfc8270f912772fd836b40e6055a7905107bf317803a2e598048a37356116192b89520f35c4ac9f9bbd5ebcd3fdadc698284f5104fb60f06bee5017b36ec7599365b6203d3834119867c4ab498abce911bfcdbfd5a76749eb7710118099b6bf7e09753e7a0d4bf7e73f00fb476a7624ae4eef7d0b2ff888f0d1f21bb7e3f1dc2093b0484c1efb0797a7a45bf25bb47549eeb21f1ec4f8ce42f204ed514d9418fcebd9df5a996c2b40f108e53b9187ccf2cbe2b36df842d2ea0235e00e23f88e32e950b7a396b53738d76e61b80bde15b4e6d95a09179377a852f18b1a89ab787054b48c31057287ab59877673b2f917cda368cfd5998c58888081f145450545c42adc79bf22eb504284706205163895497f4e370829df7ecb155e268c66196bd7d7eb9360641c48292694b743b300f38d8d15ab71fd16b3314fca0148a9eced37121ec98298e7a4f714b40fa6217e985fd40e76676994488ae81cd4f5d9ea2d64f67bd0938a3c5e7021b3db40fd052e29342e136ad7927d4d1c3e505cb4d24a99b09be3a639a0afdc10b74edbb66a854d226a1827e967ffa6b81dac6a55ca45b187b3fcdb843579ca0b656a30d045eb81173e6aad2fb2b588d0221c70ad9c4877d2f75b22ebb75af9db478dfe09258d83170ba2451725c8fdf4ce8482993c249b1dfcf6dd0583bdcbd3f04c38cc76ed3d3c7c06235315e528fa9d033d4d3dc35e1aa2b991bbcbbd4b251749dd8a34f6fda6f247a3599628fb4082cd2bf18e9bb4d3b5de7164a76e0c43ff3ba8e43cc8eaa8937636786c0073be8fb03ed0b87e06f45dedb389dd9ab1b7d290ba0a2ee5e238c6fe18d760fd7abab8e683f53fa4a75df701948414c6fe232d3ca9c82c7b3f8670dfb1b3b76163e68b6b2dbf896638719af7eaa157734e88f37a1a4af50dca5e5f01b041083ae403a55930e55de69b511763822198e22730ecaf169e4c93b6662e95ce439e9146e0fe3f7e6b8206de1cab2868146058ed3cbd1301521c9ebc5eaef877b58efffc384cae4f20b659917b76b004b99405891518c833d08c2315bec479a964d9ffdd0c6635249e0f77e820814f3776c9c73f997dd7ab7ac84c0605525b8b996dae228af282d9da9e14afe5ee35f7502e3c6744262a02233fdda8dd5ab5aa748d2d1cac8df535b98e42dcb74a7ab34e42ae75e40c093702b3249bf892ab9a8d1771807e5040ffe2b590bc16e1797a2863489d71bb5b4555a75f72caa812849f3ce87b9fb24740157530375d045c759c4eb5ec73dd48e90366ab63439e5406dc94aa8ac6a141ad012f4182bed21f296ec46761fbbd1bee665088650b58ff56acf98369b5ee773eac475eee2494714d044fc9e12b2ee47350372fb45f1366c814ad2bb41c4dff82c77a3071ce32edf6120bdb17537a63c7e3981f058ab8b0dc9cefac93d5e8db077fd242a45af314de9c207834ec739276c9903c77a24628dfa6ff83b9741637421910553bf9d6cdd59f755ffa4d2eb8225333d78b7067f34d1d560470068c4ee2f3da939a3754e413d4f834d1a44362a4be2b0f45770fa03b45e1e089b8cab5bf2ff1d4ba03288cdc72ff6d1844978e94258811902cff92df2b76b9ec9a55607f51ba9ffbb29773549bcee153cdd0f365802971145178ca2ff0d5c0730b78fc16d98c30496a566cd4e11c4de618221eaecabff84b30b6cc9164239350f67e11925b24bae9cd73f3cc1f7e80fa200e2170db22a57e9fd17fa9b2b50009cb09ea57387c4caeab4776e534058a9d72974ec21cf5dbb71def473fae16a98fb885f3263f90ad79391f3717794caedea1576efb430b63dfbb480d46f07bec82ef92305271f14b6ec0639843d96382c8fe406c92173f0a15c5ce8c878cff6aea64550dd389331cd6149f1fdb74d4513f761827899fc90243ce81a2a9bac3c85a253da44b3b3f67149ed76d9be69d3d88b8a9ef32ca312c26f27e16b6261dac852457e2aa28b6df802ddc568b39bdca5fa2d99c8c815614283bfd2c598f76335d44c5205b8e68980f01665927c15048e926b4f0f0a2e8ab8c504731f523562fc15e33848018e89f1eaeb6f0fc011c025d02f659b32418524d77cc957f014225aa31539a1c4f8705376a301de68640d4a909ef28e208558a97fca6c225b34df4cf6bd942ea48663dcab651ca025eced832d710caa6e339bf5cc45c3e19b3aac5dc2f285ac09fc1a73146b16b1060a3e89065e620555898f4fed44b26d5ec4e69e8d20ba4b3b9a50849dbbee2e63944603709476edefb13e9d971d202f09380dc9821c165c31f6e521eb658312f7508b394045d51199c381da5cda5a7b540150af5c058295e5af7fad7b8ce31125cf8f796c62f1d6e849a6af1bd2a64d6c15cf60956f6bf7d9f9502415fcf18a1c1a074420ac2207f300e7f9f1ab3d82ed7630e6e6d5b091f420583fe86e8fe56f32f7edf353ecf91f346b287dcc1d894143845f01c68b96c4f0dbf6cc376320c2fb6a36c3e4f5a6a85ef0cecae7dd60c4ea1881e62063828ad7da49d8807ba8b6f98e2e1b00fbb98ada64e590338f0cfa56abcaaefa181c89fd5a35a6e941c768d47b355a88d030950b24fdde55adfd9e200956db3a7cf2f1ff44fc0d2fa87211143b3311ea316cb303ff1cd6861aaf3037e811f3ec5c92d3940187f1b777ea702fe1eb69013d8383b4181e98e8eecf6380ea3329d41a95e61a7e9334c01bb61f8e1e6fe8df65c77cdfaac3170f6e38d58be9d4ed3170bcfdfe935a93855e799fd25c13b57e52d02d54a4fa2e24384e475548e2620f971bbe23b11ae629e820efb6be7a320e3d880c468b6f6685d1ae8929b7d64718c187b4073da70a599da97b90eb490c97ff0ed21c0390d87e86ca12488d947a1ca5cc1dc71409799d0bc700013cd2e28357977675070acb9461f0893f33e7f1960aa7530d8d5430781c01d1de45c84ecc37649ada6f6649af585eb18d3593a3be1b493475b464778f4aef87661f602c21fe4e68659ab5b72a67f609132054f48f15ffbd5d4be75e628308a3fe19338d63f0a278aa108a7c3a408daeffe793bdb4a3d64448d39a7e5c97ed3b1c32d2168b8b71b4d0b222ac2c0242ed15af47c0036b22cd6c1bc8f65a8eb46454cd52dde51d885706c3ada4f7e1a8b831965a746e2c528558c44b7ab40e126b8f9fceab7ebfc83382e52ffabbd3ae18ee654aca6e0bcf612c5efce4f6a34cf1b857b4ef2092654422e9b53291b1409e6abad76635419edecb844f27e1f686068bacd06cda53ff06a4c53bda222ccf74275b4da182cbdb331a0573d14e02db8954435256211c6f6e40ed8de688fa62bffb1b31c8316e940e63deaeb4a2eb8efc10d1835becfcaf09e579f05bf8f1d9c9751afc59d6a8a72a645275f6c27cdb6b3e507cbcd383775a23a1f79ca7032e02d2819d521a773372347df09e674aa478e66ca1335e48589d45e27bce0f0708bfe8c4ecc1f6dfa9d5e40786a027ce35eebc7a98b464d93a510d04e0693804ebacb891da2450061b6933a2340edffd579bd34282ebf49d9a7e5db58bba324787a33043c63b5f2a7955e19918f806a19082a13043ecadf7f0b1bf8ff1df368588d3b8db09b270498752531bcb54f5c629ea07dc33c6711a701fda08b84c96e0f9d0a5d5fb9b1b96bfd4e6d25998399b6620929a49133055353af78f140ed873d605456e3fd3b94f271f0ab1d661799dcd1b2f74c62ff005b6d9862797389353b2ee8983b17155cfc3c6b3ed859ad7fe3448d03169635c1f88e2f4a88fa26eafe981b470df6d66a1ccc9dd8b0187a2807ee1b9540cb4eb5399cab8759d6476fd41bf222a77f7247f0c779bf37560cb745c15de3b9e1adeeccc03039c2255d9c4d290a8c42a18a32589a3d20f99d40c82c769bfa2a37b4f79bdfce399a7b1cc67faa87ed7ad1cb8634f7ae8b713a19071ce161e53faf5804c3da15f4ed13182277f09b4d4c701e120bbbb4215e57f26286c75f6add79c5a53caa94198a9762f368edb70ca6bd09ba36cfad972eee6a4b7ab537d5b8f6cbb375edcb0532ccb31ea5ef672174128e78a98523afb40df6b8f21526c59a7e46ffebcc91873829473a57e8f023a07354b417c329ca713428e6cb9968fc848bfbe5c2859b49260b9215f5cb6fa1c019edcc7a9e4837754ae771219f4c1a4e7a06d08c00b5e94031a2be763d5992fd1f51e2ab7f212bdb7b220cb430c6e8c3e5c4c408a453b1bec06f19a7b00ed4900f4d80a15bc8aaf5eb15330c0e563d5a8dd919434d2d6d8e4a371470217c78dae1f36245441abb42196decc55232a2c8e272f5ed672640fd81de908f3295d3b65eed25eb608a2e2df96ea1bb83eb6e8de3737bd19dd0a2809c7218b467c13362aa02c759c30e26ecea72cbfcd3fd0cff293b2bd733f5e77c614036dc6d9325f53d672da6b20867fc697e43517adc50d03b175a7f38bedb0d275591f81de8433d022e1d51927f88f6e85ab881a50cecda7c106f6ae7b51d5f47f44f44e9dae31316763e928f1299a5d616f8bd2fa9128009fe97d806d12cdfd3518d485a422640a0c1dc32d2ae713d3abb22fe9382bc484c62cbc85147d7b1a35f3351cda148fff84f2309161e3f799049bf5d2e666107b76f3832fd94a83e013dc303e7e5933781fedc295b98eb093e0dc7ae7440bc3870b3881c75774ead0bfd2962b53f925b11eca81e1adc2cf386fa678e13fe875b71b7e7a5d9abc46d8e0483ffa12f889ba396e04a6ef1605580fbab22071ea349043d00d6ede442295893696716bbfaa618f7f5a3e6fb12f6d826101a1e8488300dedb06a2d438affa1dbef81e3a344c434376a98a04c1f744cd65e9a154b50a700f9608c5a31451c22d537ae3eec730f091e790082ed85b2172ae3ef50f93d620e44fad63ac65c7da445a394c6c8d450fc3f1eeb1946093ffd858de391da4e3e635bc5ca53483b151052bd1186a50c7ee227c780a13bdb23dd162d6f74b0e54c9f2dfce78ad72a73cee6198e1e70afa9e0b910f20a922aea275d6e85bf4eda26a9049e9e40b8a03cbc2226d56cc2dc9bdc0ed66ca5dd03b0bb6c495ef85628319e4d3f3ed74215db5dca2e1d99535273e68fb013993cf5314d0c2f2eb98f70756368b30928e847e79adb81f0a7b4d9bee6601405bdd061d485fd580ef895dcbaf913ba37709b43004790da59cd2d7e392b558ac274e1061d27dfee7f05be5402f03c9c8d726e9fbe2312199a497d63baf94d1b0cdece033d06ef23bfe9c4f9ecf18363a8681b423039a8655e623934fefe5a5434c502a241a0591a7fbd2ea475d0625cfb9fe33fa830887b3a239d50e33c496cb1b8720dc0297b4ba4eea94e89ab65b0ecb334fee9e93970e2669f8c345d481a638bedf337e1569e0e5f1e4146d7059] */
};
