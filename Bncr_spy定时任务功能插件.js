/**
 * @author Doraemon
 * @name Bncr_spy定时任务功能插件
 * @origin 红灯区
 * @version 1.0.4
 * @description Bncr_spy定时任务相关功能插件
 * @rule ^(定时) (\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}) (https:\/\/[A-Za-z0-9\-\._~:\/\?#\[\]@!$&'\*\+,%;\=]*)
 * @rule ^(定时) (\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}) (export[ ]{1}[^ ]+[ ]*=[ ]*"{1}([^ "]+)"{1})
 * @rule ^(定时) ([0-9]+ [0-9]+ [0-9]+ [0-9]+ [0-9]+ \*{1}) (https:\/\/[A-Za-z0-9\-\._~:\/\?#\[\]@!$&'\*\+,%;\=]*)
 * @rule ^(定时) ([0-9]+ [0-9]+ [0-9]+ [0-9]+ [0-9]+ \*{1}) (export[ ]{1}[^ ]+[ ]*=[ ]*"{1}([^ "]+)"{1})
 * @rule ^(清空过期定时任务)$
 * @admin true
 * @public false
 * @priority 1000
 * @disable false
  说明：
    1、在红灯区同级目录创建一个文件夹，名字随意 如：自用插件 和 public
        添加定时任务.js 放到自用插件下
        创建 Bncr_spy定时任务备份.txt 到 public中

    2、触发示例
          定时 2023-05-09 11:42:00 export a="b"
        或
          定时 2023-05-09 11:42:00 https://www.baidu.com
        或
          定时 57 41 11 9 5 * https://www.baidu.com

  ----------------------

  注意：
   1、简单测试可用
   2、无界超授可用
   3、自用插件
  ----------------------

  功能：
   1、通过把 2023-05-09 11:42:00 格式的时间转换为cron，再通过bncr_spy添加定时任务（已实现）
   2、时间支持cron 格式 57 41 11 9 5 * （已实现）
   3、支持判断链接或export 变量判断定时任务是否存在（已实现）
   4、如果传入的时间小于等于现在，则不进行处理 （已实现）
   5、支持清空过期定时任务，如果清空过期的定时任务成功，则会执行重启命令（已实现）
  ----------------------

  更新日志：
      v1.0.0 插件上线
      2023.5.9 v1.0.1 新增 时间支持cron 格式 57 41 11 9 5 *
                      更新 功能注释
      2023.5.9 v1.0.2 新增 支持判断cron是否过期，如果过期则不添加定时任务
      2023.5.9 v1.0.3 新增 支持清空过期定时任务
      2023.5.14 v1.0.4 优化 日志写入位置更改
*/

const Doraemon_tool = require('./mod/Doraemon_tool');

//插件入口
module.exports = async s => {
  /** Code Encryption Block[419fd178b7a37c9eae7b7426c4a04203239aca94c6c66c31402c284dcdb6d205bdcbe7a526eebe0b2e9c3fdbcce47d1e4a425519352c1e60c15510bd32856a6fdeeaa9674b63de1b4ab9c90489f83df0d27c333351b6b030def0c46bd425a705b205f4f914f134ac00750f29fe2a23cb4978a082ce06497148e8688a87d4ab9d1b464ad3c64a078d30a524c403347191f4dcf455bdd69721382949b64af639fbd96800dac35de1869639c3a8d719dec664d47e5b3341da4f1cb46ebb57e9a650e4143d948463de5d7b0ccceaffbf0649ea3334e04d3d57d23bbb01417a7ab9e73a81d22d01421970a3b7fd04ad27d425013f8dbde5459fb8415a663bc5cf4c75a85b9b5ab5737cb99b63c426a9d4983620f08aa9f6e63a084a17ee3c876cae2962cd817d692b84dd6e99c6cacbc8c56fe08c25a1f99d51e1b839095ca4968cac58f3e1c7b39dcd330d8ff428b13a48d5a5be73b4415ac67e9d08ae05456e0dca1a322fd76216d8364b46a840566ee666f99923112cf70f19de8e7473430f14735fe3abcb1a7f02556ef36ba314dc3ebab996668c2ed4f82df64d6a03ec9068e357cf9b99654887282d849e1f45827f3cc8a7111bee3867cb1bc33b42429f074929fb2e154ab7c2336982480c3ce440b164d6a9c6756ee299bee155167591573fb8e890674c51715a5a73ba407bc32280b733641396a8392a8e1de446ceff32fe72f722fd1201df1b45bb0dcd7cf900bcef982d444676fc96a91a9998dc873c424f9bcbc607b8ee6e6fa60d1f5c6efef2dd318a42688886f7e31e687f62cadd3da6872ef82585d3c87e62bac6b629495392751e0d82e2deeab85d36fbaaeb1dd5e658a42a2af0dbf08aa04f6d3034952a4584c61d57b4ae18caa991c70607d9c87490a87ea4efca03c34016d3b189f3cf36c577e980d18dde0df6b260555aea6e5247d369ab4f5d8ac9be196115b444c3df531d1238386a4f29107f02fffddf6dc499534c1a3538e7bee0da529a469cc133193e6b16687c855a2a234cc85744c2704cd857fcd3d40e05abe9b8e3280950907b4628c712705f3e19157ed9d0872c7d373ec355da10e2cf9a63baa76f82cce70679ed93bcb3b9ac50a80f6407aacaf60e47ac5b84634db29da022b2634b901328be7d5f6a9e61bb220956ea0ef0d9590985540c4fe1bf54da69edabd8ae9d4078ac729179c6c487b6e46b7d5e01a01a21f69a3afc0605d9dbcea6059659db9b7e9e625120a7c58a714250a5fa4ad5516f80cc4e6d9663f81945b98d10bf46f326bd8d6eb8ef2470d221856d4d60635e55bf9b3eb223ba96192c3bfdcd182487cfbdf77620d95ca8844bfc00ac88cea813b0f7e65eabcc170e43f97c28109df631e69615e9f216da4bba8df786fffa2142afb16229113f576bee60c23ebe8db7a0993fd76d6bc97e1065bff71f540bbdb6c1ae3ee3296dbcd6c0e0b249e204c1b4573a49cf9ae0740fb7c4ea6d68d842fa656fcea42f626aec89b67eb2cd4db4bddfacde734a08038f5be89a3bf79fff7e5462ccf6cf3155efcd8c05c29c97b8af889c1f09570bc2e85c109ce5f223a866bd3505b45344fe38342f093cb5c5bd16138961f99e94df8c48cc56c4bc907284f7759089987d418c8b749b1a9395012e901fe685b611ed792200626678d546f7a1e85d4e8204a95ddbaba1c27bc536b321384a13d879980026ce81965164795decfbff130b76c9a5f541fb20b604f43ca58e2a40dddf773cc2a1e1f8d150f26606ae4efdff06dd618878c627c1f3164dda05a5597c36b9c329d39a704887e85cecb26e45eb969c44421081c0faac243fa932a6981df8498fa7a56cbb04e3006b4be5e32a62780b775687dcc13ebaa2936932d3e68248b0b003fc91de16efdf7a28b978e3185d1bf60c5fac597283595cab20c0e7407f9913f55870da3963cf7882d750587517f298a537dff1118f4e55654b1b26e7613f1a091db240a324c09d57fb9e9b4a00c2c663c73e5f3c0fd9ba43f00d2a198704384099758fb6974488d9d7e1bc943ad0c6eb7372254f2d38a53f91941625884a30b68e61c049ca886cdafdc9b93291e03281c7aad7cfbcc9f205a4efab97bd48895f68ccbdc4b118ea95d14be8a23e7c016a050851289448a833a8c7990db06b9096cd93285cfc00355a41ad5d5cf1679c6517a76d2694ca0577a5bd028d0c403556f50675a0d8dccc23136e82ce30f755ad919f7ba0dcd29a881aeee11c5e6fc6e707df8e376b2535042daf950ecd06fe451baa9504c003c55c9e3e19eb0e1890a9421d894d49eb9ed90dad015d199eb5d1f6f5bbd0e6ace0f763312ff3a265650a821884366c490c74ca333ef5f61d1e132168a7e147e35d2fde513913fa2a0aed141232c52dbbf958d1cdd72461d5bd590ce5d52fb629aca7a88471fcd9e57552b8b5e627bf62cd5ca2cf7b4791a06e43e75f8899d068d6349d04f5c25f0e953a389478977e61750a40d58632da8aef2a970407bfc2e6cabc6cf6c641c4d26bcd128743ea2ab4e657a8d1204fe08677adbc4f175de334b5441fc400ca0e9dc6fdb1989e5a1e56845fa2679f23c3e06301dbdcf53d895da1bf4824a316fce792005575fa77e30989803fa2a73503774caa12d22447d406d1bb80cb7c7aff466edbd45b09d1fbb7876b015a7c1a7e9b16aa52bc62a825e1caca461a34f4b4726d239b75ecc2cd4b53807018ad86eb4c3949d7300773260f2c3dfcf3ad9a2e932e877404455b54c4d7880de3382639982256bf6a27da35491c5d0fc716ac86f5829511b5c96edb7dc355d38daad0a21597e21a44d11efbc95c951790eda1b9860db4334f1e690d7c3c909ab81df0152b134fdeafedaeb0a86daaa1c0ab7f733530ddc34bff5d987e6ff96594cf1a31b60ea2bc92facbe51ac63a4c1cc9f9e68352cc95b2a4f4788ae3e1366be6f7b955c9a5376677a18f5f431b70dd4cce279f943b17ecb9ca412af92d0475d55b8b07555504517a7e0545af711c17f5f761376e6af2200877db3a19ad627b741d75695f17bcf25a691ddaae927605952804ea85100a25fe5ed55eb19064d3bcc0e117f6cffa4e9500942c8886fe96b07ec94c5ba65d77c7be5fa1703b05498b24968867ff7429295ded8872c993d7f448ec00fd7b0115ba36535c53e0ff915de7f6eec2493ce291b41dda5c500e64a638ec073620f73d17f1dac7cfd41657587a8d3e4e3a95e14b8dd82f5d1057ea86a5e33d024d0ecb985f797d32327f202281b8e0bf70915803459fe90ac85ffaf89aa723e434209e56a5d9403d499f64e06a524ecc8019c69e8769860039d7f5fd095cd366c2a0441922bd8f162e1f2d664492980f68f132922ffaf68c8d719dc9c49f3cd160b1649967ab0a47e3ec1c5b3330a584e0324ddcae68bb5e4c0a118c913c1d935d650c4447857ea1026cf1ead4f34264c13a9e9a8539dc37c3cf8eae64a6be14dd87625464c0b69b9d31a92ab84475c16696c1d16aa3] */
};
